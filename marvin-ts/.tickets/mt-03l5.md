---
id: mt-03l5
status: closed
deps: [mt-it7x]
links: []
created: 2026-02-18T00:26:56Z
type: task
priority: 2
assignee: kmd
parent: mt-yi7w
tags: [backend, session]
---
# Chat history and usage tracking

Implement src/history.ts: loadChatLog(profileDir), appendChat(profileDir, role, text), compactHistory(). Format: [{role, text, time}] in chat_log.json. Implement src/usage.ts: UsageTracker class with recordTurn(provider, usage), recordToolCall(name), summary(), lifetimeSummary(). Persist lifetime to ~/.config/local-finder/usage.json. Per-provider input/output token counts and estimated costs.

